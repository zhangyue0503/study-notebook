<html>
<head>
  <title>前端性能监控与优化实战（网易）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/608449 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
	body, td {
	  font-family: 微软雅黑;
	  font-size: 12pt;
	}
  </style>
</head>
<body>
<a name="1038"/>
<h1>前端性能监控与优化实战（网易）</h1>

<div>
<span><div><h1 style="box-sizing: border-box; font-size: 24px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 24px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; font-weight: bold; line-height: 1.1;">评判标准</span></h1><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">无规矩不成方圆，所以这里先说说评判标准。评判标准主要指的是用户打开网页、浏览网页的体验和感受。我们需要一种客观的评估模型来统一量化用户体验的各个环节，这样才能找到需要优化的方向，找到开发极致体验网页的捷径。</span></div><h2 style="box-sizing: border-box; font-size: 20px; padding: 10px 0px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 20px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 18px;">RAIL评估模型</span></h2><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><a href="https://developers.google.com/web/fundamentals/performance/rail?hl=zh-cn" style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: transparent; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;-en-paragraph:true;">RAIL</a><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> 是一种以用户为中心的性能模型。每个网络应用均具有与其生命周期有关的四个不同方面，且这些方面以不同的方式影响着性能。以用户为中心；最终目标不是让您的网站在任何特定设备上都能运行很快，而是使用户满意。</span></div><ul style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">Response，立即响应用户；在 100 毫秒以内确认用户输入。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">Animation，设置动画或滚动时，在 10 毫秒以内生成帧。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">Idle，最大程度增加主线程的空闲时间。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">Load，持续吸引用户；在 1000 毫秒以内呈现交互内容。</span></div></li></ul><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">让用户成为您的性能工作的中心。用户花在网站上的大多数时间不是等待加载，而是在使用时等待响应。了解用户如何评价性能延迟：</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><div><br/></div><table style="box-sizing: border-box; border-spacing: 0px; border-collapse: collapse; min-width: 100%;" width="906"><colgroup><col style="width: 453px;"></col><col style="width: 453px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td colspan="2" style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 906px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">延迟与用户反应</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">0 – 16 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">流畅；人们特别擅长跟踪运动，如果动画不流畅，他们就会对运动心生反感。 用户可以感知每秒渲染 60 帧的平滑动画转场。也就是每帧 16 毫秒（包括浏览器将新帧绘制到屏幕上所需的时间），留给应用大约 10 毫秒的时间来生成一帧。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">0 – 100 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">快，在此时间窗口内响应用户操作，他们会觉得可以立即获得结果。时间再长，操作与反应之间的连接就会中断。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">100 – 300 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">可感觉慢，需要loading，用户会遇到轻微可觉察的延迟。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">300 – 1000 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">慢，需要做loading和占位。在此窗口内，延迟感觉像是任务自然和持续发展的一部分。对于网络上的大多数用户，加载页面或更改视图代表着一个任务。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">1000+ 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">很慢，超过 1 秒，用户的注意力将离开他们正在执行的任务。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">10,000+ 毫秒</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 453px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">放弃，用户感到失望，可能会放弃任务；之后他们或许不会再回来。</span></div></td></tr></tbody></table><div><br/></div></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">响应：在 100 毫秒以内响应</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">在用户注意到滞后之前您有 100 毫秒的时间可以响应用户输入。这适用于大多数输入，不管他们是在点击按钮、切换表单控件还是启动动画。但不适用于触摸拖动或滚动。 如果您未响应，操作与反应之间的连接就会中断。用户会注意到。 尽管很明显应立即响应用户的操作，但这并不总是正确的做法。使用此 100 毫秒窗口执行其他开销大的工作，但需要谨慎，以免妨碍用户。如果可能，请在后台执行工作。 对于需要超过 500 毫秒才能完成的操作，请始终提供反馈。</span></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">动画：在 10 毫秒内生成一帧</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">动画不只是奇特的 UI 效果。例如，滚动和触摸拖动就是动画类型。 如果动画帧率发生变化，您的用户确实会注意到。您的目标就是每秒生成 60 帧，每一帧必须完成以下所有步骤：</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">从纯粹的数学角度而言，每帧的预算约为 16 毫秒（1000 毫秒 / 60 帧 = 16.66 毫秒/帧）。 但因为浏览器需要花费时间将新帧绘制到屏幕上，只有 10 毫秒来执行代码。 在像动画一样的高压点中，关键是不论能不能做，什么都不要做，做最少的工作。 如果可能，请利用 100 毫秒响应预先计算开销大的工作，这样您就可以尽可能增加实现 60fps 的可能性。 如需了解详细信息，请参阅</span><a href="https://developers.google.com/web/fundamentals/performance/rendering/?hl=zh-cn" style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: transparent; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;-en-paragraph:true;">渲染性能</a><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">。</span></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">空闲：最大程度增加空闲时间</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">利用空闲时间完成推迟的工作。例如，尽可能减少预加载数据，以便您的应用快速加载，并利用空闲时间加载剩余数据。 推迟的工作应分成每个耗时约 50 毫秒的多个块。如果用户开始交互，优先级最高的事项是响应用户。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">要实现小于 100 毫秒的响应，应用必须在每 50 毫秒内将控制权返回给主线程，这样应用就可以执行其像素管道、对用户输入作出反应，等等。以 50 毫秒块工作既可以完成任务，又能确保及时的响应。</span></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">加载：在 1000 毫秒以内呈现内容</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">在 1 秒钟内加载您的网站。否则，用户的注意力会分散，他们处理任务的感觉会中断。侧重于</span><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/?hl=zh-cn" style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: transparent; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;-en-paragraph:true;">优化关键渲染路径</a><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">以取消阻止渲染。 实际操作中，我们无需在 1 秒内加载所有内容以产生完整加载的感觉，而是启用渐进式渲染和在后台执行一些工作，默认只加载和渲染首屏内容，将非首屏、非必需的加载推迟到空闲时间段处理。</span></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">关键 RAIL 指标汇总</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">要根据 RAIL 指标评估您的网站，请使用 Chrome DevTools </span><a href="https://developers.google.com/web/tools/chrome-devtools/profile/evaluate-performance/timeline-tool?hl=zh-cn" style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: transparent; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;-en-paragraph:true;">Timeline 工具</a><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">记录用户操作。然后根据这些关键 RAIL 指标检查 Timeline 中的记录时间。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><div><br/></div><table style="box-sizing: border-box; border-spacing: 0px; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">RAIL 步骤</span></div></td><td style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">关键指标</span></div></td><td style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">用户操作</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px; font-weight: bold;">响应</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">输入延迟时间（从点按到绘制）小于 100 毫秒。</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">用户点按按钮（例如打开导航）。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px; font-weight: bold;">动画</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">每个帧的工作（从 JS 到绘制）完成时间小于 16 毫秒。</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">用户滚动页面，拖动手指（例如，打开菜单）或看到动画。 拖动时，应用的响应与手指位置有关（例如，拉动刷新、滑动轮播）。 此指标仅适用于拖动的持续阶段，不适用于开始阶段。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px; font-weight: bold;">空闲</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">主线程 JS 工作分成不大于 50 毫秒的块。</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">用户没有与页面交互，但主线程应足够用于处理下一个用户输入。</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px; font-weight: bold;">加载</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">页面可以在 1000 毫秒内就绪。</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant: normal; line-height: 25px;">用户加载页面并看到关键路径内容。</span></div></td></tr></tbody></table><div><br/></div></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">这是Google工程师提出来的RAIL优化模型，在实际前端业务监控中，我们可以拆分成更多的数据指标进行统计分析。</span></div><h3 style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; padding-bottom: 0px; border-left: 4px solid rgb(255, 146, 111); padding-left: 10px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 18px; border-bottom-style: none; border-left: 4px solid rgb(255, 146, 111); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 1.1;">性能和体验数据指标</span></h3><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">数据驱动业务开发，我们的目标是高性能和极致用户体验，那么我们首先需要制定符合我们目标的性能数据指标和体验数据指标。 在制定数据指标之前，我们分析下页面加载过程，我们分为这四个部分：</span></div><table style="box-sizing: border-box; border-spacing: 0px; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">用户体验</span></div></td><td style="box-sizing: border-box; text-align: center; background-color: rgb(249, 249, 249); border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">描述</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">它在发生吗？happening</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">网页浏览顺利开始了吗？服务端有响应吗？</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">它是否有用？useful</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">用户是否能看到足够的内容？</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">它是否可用？usable</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">用户是否可以和页面交互，还是页面仍在忙于加载？</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">它是否令人愉快的？idle</span></div></td><td style="box-sizing: border-box; border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;">交互是否流程和自然，没有卡段或闪烁？</span></div></td></tr></tbody></table><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> </span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; font-weight: bold;-en-paragraph:true;">性能指标</span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">：加载呈现又快又稳。加载到展现的性能指标和稳定性指标。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; font-weight: bold;-en-paragraph:true;">体验指标</span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">：操作反应灵敏。点击，滑动等交互响应及时，操作流畅，动画运行流畅。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> </span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">加载性能指标：</span></div><ul style="box-sizing: border-box;"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">秒开率：页面首屏加载时间小于1s的比例，也就是页面加载到onload事件触发时所消耗的时间。</span></div></li><li style="box-sizing: border-box;"><div><a href="https://w3c.github.io/paint-timing/" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">FP（first paint） 和 FCP（first content paint）</a><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;"> 分别是指页面首次绘制和首次内容绘制。FP（首次绘制）包括了任何用户自定义的背景绘制，它是首先将像素绘制到屏幕的时刻。FCP（首次内容绘制）是浏览器将第一个 DOM 渲染到屏幕的时间。该指标报告了浏览器首次呈现任何文本、图像、画布或者 SVG 的时间。这两个指标其实指示了我们通常所说的白屏时间。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">FMP(first meaningful paint)首次有意义绘制, 是页面可用性的度量标准。因为很难有一个通用标准来指示所有的页面当前时刻的渲染达是否到了有用的程度，所以当前并没有制定标准。对于开发者，我们可以根据自己的页面来确定那一部分是最重要的，然后度量这部分渲染出的时间作为FMP。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">TTFB(time to first byte, 首字节时间)，是指从浏览器发起第一个请求到数据返回第一个字节所消耗的时间，这个时间包含了网络时间，后端处理时间等等，可以作为一个链路数据综合参考指标。</span></div></li></ul><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">稳定性指标</span></div><div style="box-sizing: border-box;"><ul style="box-sizing: border-box;"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">资源错误：静态资源加载错误，常见的就是404，资源地址不正确或者远程服务有问题。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">JS报错：页面运行时抛出来的异常信息。比如变量未定义，函数报错等等。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">Crash：页面白屏不展示内容，很可能是页面某个模块报错导致整个页面不展示。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">内存堆栈：监控页面内存和堆栈使用情况，常见如页面内存泄露等原因会直接导致APP闪退。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">接口报错：接口挂了，请求超时。或者接口返回了错误信息。或者接口返回数据错误，比如空数据，不符合预期。</span></div></li></ul></div></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">操作体验指标：</span></div><ul style="box-sizing: border-box;"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">交互延迟：用户点击后页面没有响应或者响应时间超过100ms，用户感觉这次点击操作是延迟的（可称为无效点击）。通过</span><a href="https://www.fed123.com/pwa/3301.html" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">EventTiming API</a><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">我们可以统计用户交互操作后的浏览器响应时间。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">卡顿：统计浏览器中执行时间超过 50 ms 的任务，都是 long task（</span><a href="https://w3c.github.io/longtasks/" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">Long tasks API</a><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;"> ），可能会造成页面卡顿。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">滚动流畅性：滚动过程是否流畅，监测用户开始操作到页面开始滚动的时间差，按照前面的标准，小于100ms才会体验流畅。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">动画流畅性：监测动画开始到动画结束，计算帧率FPS。按照前面的标准，每帧计算时间小于10ms才会体验流畅。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">TTI（</span><a href="https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/preview#" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">time to interactive</a><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">, 可交互时间)：指页面已渲染出内容，同时可以响应用户的输入的时间。</span></div></li><li style="box-sizing: border-box;"><div><a href="https://developers.google.com/web/updates/2018/05/first-input-delay" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">FID（First Input Delay）</a><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">，首次输入延迟，从用户看到页面到第一次输入的延迟，一般都是因为主线程阻塞，会导致响应慢。这个指标反映用户对当前页面的第一感觉，如果用户很久没有交互，说明首屏内容比较吸引人，或者用户很快就切走了，说明对用户没有吸引力。</span></div></li></ul><div style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;-en-paragraph:true;"> </span></div></div><h2 style="box-sizing: border-box; font-size: 20px; padding: 10px 0px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 20px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 18px;">性能指标数据采集</span></h2><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">介绍上面我们总结的性能和体验指标如何准确有效的采集。</span></div><ul style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><li style="box-sizing: border-box;"><div><a href="https://www.fed123.com/pwa/3301.html" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">前端页面性能指标数据计算方法</a></div></li><li style="box-sizing: border-box;"><div><a href="https://www.fed123.com/pwa/3423.html" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">前端页面性能指标数据采集架构</a></div></li></ul><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> </span></div><h1 style="box-sizing: border-box; font-size: 24px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 24px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; font-weight: bold; line-height: 1.1;">优化实战</span></h1><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">我们已经全面分析总结了评估页面性能和用户体验的各个指标参数。那么怎么来优化呢？</span><a href="https://opensignal.com/reports/2018/02/global-state-of-the-mobile-network" style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: transparent; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;-en-paragraph:true;">open signal</a><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">官方提供了2018年2月份统计的全世界4G网络覆盖率和通信速率的统计分布图如下，在目前移动互联网的浪潮下，我们要利用好用户终端设备的每个字节的流量。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">当然页面性能和体验优化并不是一蹴而就的，需要不断的研究、跟踪，发现问题，解决问题。但是我们可以在一开始编写业务代码的时候就做的更好，做到极致。所以，关于优化实战我们主要分为两部分：</span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; font-weight: bold;-en-paragraph:true;">加载渲染链路优化</span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> 和 </span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px; font-weight: bold;-en-paragraph:true;">编程代码优化</span><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">。  </span></div><h2 style="box-sizing: border-box; font-size: 20px; padding: 10px 0px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 20px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 18px;">加载渲染链路优化</span></h2><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">从访问url到页面呈现，整个加载和渲染链路可以做优化的思路。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">加载链路：浏览器导航开始-&gt;检查缓存-&gt;DNS-&gt;HTTP-&gt;解析</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">渲染链路：浏览器内核或者webview（对于ios区分wkwebview和早期版本的uiwebview）渲染流程</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">具体详情参看下面这篇文章：</span></div><ul style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><li style="box-sizing: border-box;"><div><a href="https://www.fed123.com/pwa/3303.html" style="box-sizing: border-box; background: transparent; font-size: 18px; font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px; color: rgb(66, 139, 202); text-decoration: underline;">前端网页加载渲染链路优化</a></div></li></ul><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;"> </span></div><h2 style="box-sizing: border-box; font-size: 20px; padding: 10px 0px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><span style="box-sizing: border-box; font-size: 20px; border-bottom: 1px solid rgb(238, 238, 238); letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 18px;">编程代码优化</span></h2><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">我们说的“快”，并不仅仅指浏览器器加载页面快，就是常说的秒开率，一般指DomContentLoad时间。但是“快”其实包含更多的含义，除了前面说的浏览器加载快，还包含浏览器解析快（Javascript脚本发布时通常都会做代码压缩混淆，不仅是减少体积，也为了安全性），JS脚本编译快（我们知道javascript在浏览器的javascript虚拟机【managed runtime environment for JavaScript，JavaScript托管运行时环境】中运行的，所以也需要编辑JS脚本成字节码，才能运行），最后一个就是javascript执行快。</span></div><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">链路优化中，我们已经解决了JavaScript下载加速的问题，那么剩下的优化工作主要集中在优化浏览器解析、编译并执行JS脚本。影响浏览器解析和执行JS脚本的因素主要是JS脚本的体积大小和代码的复杂程度。所以编程代码优化实践主要是减少代码的体积和按需降低代码复杂度，实现浏览器解析快，JS脚本编译快。</span></div><ul style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">代码体积大，加载就会耗时，而且占用cdn存储资源和http请求资源，浏览器解析时暂用内存多，分析代码耗时。</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">代码复杂度高，代码解析就比较耗时。如果依赖一些复杂的类库，还要考虑库的解析和执行时间。浏览器解析代码会占用更多内存，使用堆栈更深，执行耗时。</span></div></li></ul><div style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245); color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 25px;-en-paragraph:true;">优化策略：</span></div><ul style="box-sizing: border-box; font-size: 15px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 245);"><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">首屏渲染与PRPL</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">懒加载组件</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">滚动加载分页组件</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">web worker</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">task拆分</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">代码分割与打包</span></div></li><li style="box-sizing: border-box;"><div><span style="font-size: 18px; color: rgb(68, 68, 68); font-family: &quot;Microsoft Yahei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant: normal; line-height: 25px;">项目架构优化</span></div></li></ul><div><br/></div><div><br/></div></div></span>
</div></body></html> 