<html>
<head>
  <title>详解Laravel源码中优秀的设计模式【掘金】</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/608449 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
	body, td {
	  font-family: 微软雅黑;
	  font-size: 12pt;
	}
  </style>
</head>
<body>
<a name="1669"/>
<h1>详解Laravel源码中优秀的设计模式【掘金】</h1>

<div><span><div>1.简单工厂抽象层次低，所以在对其进行扩展（增加对象逻辑关系）时，需要增加或者重复书写的代码就比较多，这对于经常增加新的对象类型来说会带来不少麻烦。不过，也下是因为抽象层次低，我们在代码里就不需要实现过多针对抽象的代码，能够减少这部分的代码量和处理逻辑</div><div><br/></div><div>2.Laravel的Redis模块，使用了工厂模式</div><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>3.在控制反转中，程序控制者拥有对依赖管理的能力，所以可以很方便的为对象准备所需的依赖</div><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>4.容器也可以称为依赖注入容器（Dependency Injection Container），能够完成对象实例化和依赖注入的过程。而在这个过程中，被创建的对象本身，却并不知道容器的存在，也不知道自己正受到容器的管理</div><div><br/></div><div>5.在Laravel中，将不同的模块以服务（Service）的形式进行封装，所以Laravel的容器，就称为服务容器（Service Container）</div><ul><li><div>在\Illuminate\Container\Container中，通过resolveDependencids来分析和查找依赖参数</div></li><li><div>通过resolve()和call()方法实现构造器注入和调用注入</div></li><li><div>对于基础类型的参数，Laravel会从传入参数和参数默认值中进行选择，而对于需要的对象，Laravel会继续从容器中查找</div></li><li><div>这样，就形成了完整的通过容器，实现依赖处理逻辑</div></li></ul><div><br/></div><div>6.数据库的查询构造器是建造模式的典型应用</div><div><br/></div><div>7.Laravel中的驱动（Driver）对应策略模式，如Queue模块</div><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>8.Laravel中的集合类（Connection）实现了迭代器模式</div><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>9.PHP5.5以上的生成器语法</div><ul><li><div>通过yield来返回数据</div></li><li><div>可以直接在方法中使用</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">function</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </span><span style="color: rgb(153, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">xrange</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">($start, $limit, $step = </span><span style="color: teal; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">1</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">)</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">{</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-weight: bold; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">for</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">($i = $start; $i &lt;= $limit; $i += $step) {</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-weight: bold; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">yield</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">$i; } }</span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">$numbers = [];</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-weight: bold; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">foreach</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">(range(</span><span style="color: teal; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">1</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">,</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: teal; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">9</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">,</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: teal; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">2</span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">)</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-weight: bold; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">as</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> </span><span style="color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12px; font-variant: normal; letter-spacing: normal; line-height: 21px; orphans: auto; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);">$number) { $numbers[] = $number; }</span></div></div><div><br/></div><div>10.观察者模式我们通过让对象主动将自己的状态更新通知观察者，而不是让观察者进行持续的监听</div><ul><li><div>常用的实现：发布订阅、模型视图、事件监听</div></li><li><div>事件模式中，Illuminate\Events\Dispatcher是Illuminate\Contracts\Events\Dispatcher的实现，其担任的就是事件的调度和分发作用</div></li></ul><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>11.代理模式</div><ul><li><div>php中动态代理直接使用__call()</div></li><li><div>Laravel中Redis的实现</div></li></ul><div><img src="详解Laravel源码中优秀的设计模式【掘金】_files/Image [6].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>12.责任链与管道</div><ul><li><div>管道对象并不是用来管理请求如何通过中间件或者其他类似的责任链的，管道对象只是帮助我们去制造一个责任链，最终，我们不过是把对象传递到管道所制造的责任链中而已</div></li></ul><div><br/></div><div>13.装饰器模式</div><ul><li><div>通过Illuminate\Log\Writer来为Monolog的Monolog\Logger对象增加新性能</div></li></ul><div><br/></div></span>
</div></body></html> 